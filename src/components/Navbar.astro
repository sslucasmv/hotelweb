---
// src/components/Navbar.astro
const pathname = new URL(Astro.request.url).pathname;
---
<header 
  class="sticky top-0 z-50 bg-white backdrop-blur-md px-6 py-2 transition-all duration-500 border-b border-transparent" 
  id="main-header"
>
    <div class="max-w-7xl mx-auto flex items-center justify-between">
        
        <div class="flex-shrink-0">
            <a href="/">
                <img src="/images/logohotel.png" alt="Logo Hotel Soleares" class="h-16 w-auto" />
            </a>
        </div>

        <nav class="hidden md:flex items-center gap-10 absolute left-1/2 -translate-x-1/2">
            <a class={`nav-link relative py-2 font-semibold text-gray-600 ${pathname === "/" ? "link-active" : ""}`} href="/">Inicio</a>
            <a class={`nav-link relative py-2 font-semibold text-gray-600 ${pathname === "/habitaciones" ? "link-active" : ""}`} href="/habitaciones">Habitaciones</a>
            <a class={`nav-link relative py-2 font-semibold text-gray-600 ${pathname === "/servicios" ? "link-active" : ""}`} href="/servicios">Servicios</a>
            <a class={`nav-link relative py-2 font-semibold text-gray-600 ${pathname === "/contacto" ? "link-active" : ""}`} href="/contacto">Contacto</a>
        </nav>

        <div class="flex items-center gap-4 flex-shrink-0">
            <button class="btn-ocean hidden sm:flex">
               <span class="onda"></span>
               <span class="onda"></span>
               <span class="relative z-10">Contáctenos</span>
            </button>

            <button class="menu-hamburguesa material-symbols-outlined text-gray-600 p-2 text-3xl cursor-pointer" id="mobile-menu-open">
                menu
            </button>
        </div>
    </div>
</header>

<div id="mobile-menu" class="fixed inset-0 z-[60] bg-white transform translate-x-full transition-transform duration-300 md:hidden flex flex-col p-6">
    <div class="flex justify-between items-center">
        <img src="/images/logohotel.png" alt="Logo" class="h-12 w-auto" />
        <button class="material-symbols-outlined text-3xl cursor-pointer" id="mobile-menu-close">close</button>
    </div>
    
    <nav class="flex flex-col gap-4 mt-8">
        <a class={`text-lg font-bold p-3 rounded-lg ${pathname === "/" ? "text-blue-ocean bg-blue-ocean/10" : "text-gray-600"}`} href="/">Inicio</a>
        <a class={`text-lg font-bold p-3 rounded-lg ${pathname === "/habitaciones" ? "text-blue-ocean bg-blue-ocean/10" : "text-gray-600"}`} href="/habitaciones">Habitaciones</a>
        <a class={`text-lg font-bold p-3 rounded-lg ${pathname === "/servicios" ? "text-blue-ocean bg-blue-ocean/10" : "text-gray-600"}`} href="/servicios">Servicios</a>
        <a class={`text-lg font-bold p-3 rounded-lg ${pathname === "/contacto" ? "text-blue-ocean bg-blue-ocean/10" : "text-gray-600"}`} href="/contacto">Contacto</a>
        
        <div class="mt-4 pt-4 border-t border-gray-100">
            <button class="w-full bg-blue-ocean text-white py-4 rounded-xl font-bold text-lg">
                Contáctenos ahora
            </button>
        </div>
    </nav>
</div>

<style>
    /* Estilos del Link Activo con tus variables */
    .nav-link { display: inline-block; transition: all 0.3s ease; }
    .nav-link:hover { color: var(--color-blue-ocean); }
    
    .link-active { color: var(--color-blue-ocean) !important; }
    .link-active::after {
        content: ''; 
        position: absolute; 
        bottom: 0; 
        left: 50%; 
        transform: translateX(-50%);
        width: 80%; 
        height: 2px;
        background: linear-gradient(to right, transparent, var(--color-blue-ocean), transparent);
        border-radius: 2px;
    }

    /* Ocultar hamburguesa en escritorio */
    @media (min-width: 768px) {
        .menu-hamburguesa { display: none !important; }
    }
</style>

<script>
    document.addEventListener('astro:page-load', () => {
        const header = document.getElementById('main-header');
        const mobileMenu = document.getElementById('mobile-menu');
        const openBtn = document.getElementById('mobile-menu-open');
        const closeBtn = document.getElementById('mobile-menu-close');

        // Lógica de Scroll para Sombra y Borde
        window.addEventListener('scroll', () => {
            if (window.scrollY > 10) {
                header?.classList.add('shadow-xl', 'shadow-blue-ocean/5', 'border-blue-ocean/10');
                header?.classList.replace('py-2', 'py-1');
            } else {
                header?.classList.remove('shadow-xl', 'shadow-blue-ocean/5', 'border-blue-ocean/10');
                header?.classList.replace('py-1', 'py-2');
            }
        });

        // Lógica Menú Mobile
        openBtn?.addEventListener('click', () => mobileMenu?.classList.remove('translate-x-full'));
        closeBtn?.addEventListener('click', () => mobileMenu?.classList.add('translate-x-full'));
        
        mobileMenu?.querySelectorAll('a, button').forEach(el => {
            el.addEventListener('click', () => mobileMenu?.classList.add('translate-x-full'));
        });
    });
</script>